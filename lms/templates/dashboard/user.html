{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" integrity="sha256-Uv9BNBucvCPipKQ2NS9wYpJmi8DTOEfTA/nH2aoJALw=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css" integrity="sha256-aa0xaJgmK/X74WM224KMQeNQC2xYKwlAt08oZqjeF0E=" crossorigin="anonymous" />
    <title>User data</title>
    <style>
        body{
            background-color: #EDE7FA;
            font-family:'Times New Roman', Times, serif;
            
        }
        .a{
            text-align: center;
            font-size: 20px;
            background-color: rgba(237, 231, 250, 1);
        }

        .b{
            padding-top: 10px;
            padding-left: 1s0px;
            font-size: 18px;
            font-weight: "bold";
        }

        .d{
            text-align: center;
            font-size: 20px;
        }

        form {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px; /* Spacing between elements */
        border: 2px solid #ccc; /* Set the border style, color, and width */
        border-radius: 10px; /* Add rounded corners if desired */
        /* Example: */
      }

      /* Input field styling */
      input[type="date"],
      input[type="text"],
      input[type="submit"] {
        /* Example: */
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 20px;
      }

      /* Submit button styling */
      input[type="submit"] {
        /* Example: */
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
      }

        nav {
            background-color: rgba(217, 214, 240, 1);
        }
        .logo {
            display: inline-block;
            padding: 10px 25px;
        }

        .logo span {
            background-color: #181754;
            font-size: 1em;
            vertical-align: top;
            color: #fff;
        }

        .logo:hover span {
            background-color: #181754;
        }

        nav {
            background-color: rgba(217, 214, 240, 1);
        }

        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        li {
            font-size: larger;
            display: inline-block;
            padding: 10px 20px;
            margin-right: 10px;
        }

        li:last-child {
            margin-right: 0;
        }

        .grey {
            font-size: 25px;
            text-align: center;
            padding: 20px 35px;
            text-decoration: none;
            border-radius: 18px;
            color: #fff;
        }

        li:not(.logo):hover .grey {
            background-color: #181754;
            color: rgb(75, 28, 140);
            transition: background-color 0.3s, color 0.3s;
        }

        h2 {
            font-family: 'Merriweather', serif;
            margin-top: 0;
            text-align: center;
        }

        nav a {
            color: rgb(51, 19, 85);
            text-decoration: none;
        }

        nav a:hover {
            color: rgb(91, 26, 161);
        }
    </style>
  </head>
  <body>
    <nav>
            <ul>
                <li class="logo"><a href="members_list.html"><img src="..\static\images\Logo.png" style="height: 85px; width: 200px;"></a></li>
                <li class="grey"><a href="#">Leave Request</a></li>
                <li class="grey"><a href="#">Approval</a></li>
                <li class="grey"><a href="user.html">User</a></li>
            </ul>
        </nav>
      <div class="a">
        {% for member in members %}
            {% if member.id == id %}
                <img src="{{ member.image.url }}" width="220" alt="">
                <br><br><br>
                <h1>{{ member.first_name }}</h1>
                <p>Email: {{ member.email }}</p>
                <p>Gender: {{ member.gender }}</p>
                <p>Role: {{ member.status }}</p>
                <p>Year: {{ member.year }}</p><br>
            {% endif %}
        {% endfor %}
    </div>
    
    <div class="b">
        <form method="post">
            {% csrf_token %}
            <label for="start-date">Start Date:</label>
            <input type="date" id="start-date" name="start-date"><br>
            <label for="end-date">End Date:</label>
            <input type="date" id="end-date" name="end-date"><br>
            <input type="submit" value="Submit">
        </form><br><br>
    
        {% if dict %}
            <p>Number of days on leave: {{ dict.n_days }} out of {{ dict.n_dayst }} days</p>
            <script>
                // jQuery function
                $(document).ready(function(){
                    var ctx = document.getElementById('myChart').getContext('2d');
                    var myChart = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Days absent', 'Days present'],
                            datasets: [{
                                label: '# of users',
                                data: ['{{ dict.n_days }}', '{{ dict.days_present }}'],
                                backgroundColor: [
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(54, 162, 235, 0.2)'
                                ],
                                borderColor: [
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(54, 162, 235, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                });
            </script>
            
            <canvas id="myChart" width="400" height="100"></canvas>  
            
            <div class="d">
                <!-- Content for the "d" class if records are found -->
            </div>
        
        {% else %}
            <div class="d">
                <p>No leave records found. <br> Please choose another range.</p>
            </div>
        {% endif %}
    </div>
    